{"version":3,"file":"react-ref-boundary.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: React.Ref<unknown>) => void;\n  refs: React.Ref<unknown>[];\n};\n\nconst RefContext = React.createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: React.ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const state = React.useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(initialValue: T): React.RefObject<T> {\n  const ref = React.useRef<T>(initialValue);\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary',\n    );\n  React.useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n"],"names":["RefContext","React","createContext","undefined","param","children","refs","useState","createElement","Provider","value","addRef","ref","push","splice","indexOf","context","useContext","Error","initialValue","useRef","useEffect"],"mappings":"8WAOMA,EAAaC,EAAK,QAACC,mBAA0CC,sBAKF,SAE3DC,GADJC,IAAAA,IAAAA,SAGMC,EADQL,EAAAA,QAAMM,SAAS,IACV,GAOnB,OACEN,UAAAO,cAACR,EAAWS,SAAQ,CAACC,MAAO,CAAEC,OANhC,SAAgBC,GAEd,OADAN,EAAKO,KAAKD,GACH,kBAAMN,EAAKQ,OAAOR,EAAKS,QAAQH,GAAM,KAINN,KAAAA,IACnCD,kBAgBA,WACL,IAAMW,EAAUf,EAAAA,QAAMgB,WAAWjB,GACjC,IAAKgB,EACH,MAAM,IAAIE,MACR,iFAEJ,MAAO,CAAEZ,KAAMU,EAAQV,gBAjBlB,SAAmBa,GACxB,IAAMP,EAAMX,EAAAA,QAAMmB,OAAUD,GACtBH,EAAUf,EAAAA,QAAMgB,WAAWjB,GACjC,IAAKgB,EACH,MAAM,IAAIE,MACR,+IAGJ,OADAjB,EAAK,QAACoB,WAAU,WAAML,OAAAA,EAAQL,OAAOC,MAC9BA"}
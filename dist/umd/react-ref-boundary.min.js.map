{"version":3,"file":"react-ref-boundary.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: React.Ref<unknown>) => void;\n  refs: React.Ref<unknown>[];\n};\n\nconst RefContext = React.createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: React.ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const state = React.useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(initialValue: T): React.RefObject<T> {\n  const ref = React.useRef<T>(initialValue);\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary',\n    );\n  React.useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n\nexport default {\n  BoundaryProvider,\n  useRef,\n  useBoundary,\n};\n"],"names":["RefContext","React","createContext","undefined","BoundaryProvider","param","children","refs","useState","createElement","Provider","value","addRef","ref","push","splice","indexOf","useRef","initialValue","context","useContext","Error","useEffect","useBoundary","index"],"mappings":"8WAOMA,EAAaC,EAAK,QAACC,mBAA0CC,GAKtDC,EAAoD,SAE3DC,GADJC,IAAAA,IAAAA,SAGMC,EADQN,EAAAA,QAAMO,SAAS,IACV,GAOnB,OACEP,UAAAQ,cAACT,EAAWU,SAAQ,CAACC,MAAO,CAAEC,OANhC,SAAgBC,GAEd,OADAN,EAAKO,KAAKD,GACH,kBAAMN,EAAKQ,OAAOR,EAAKS,QAAQH,GAAM,GAC7C,EAGuCN,KAAAA,IACnCD,IAKA,SAASW,EAAUC,GACxB,IAAML,EAAMZ,EAAAA,QAAMgB,OAAUC,GACtBC,EAAUlB,EAAAA,QAAMmB,WAAWpB,GACjC,IAAKmB,EACH,MAAM,IAAIE,MACR,+IAGJ,OADApB,EAAK,QAACqB,WAAU,WAAMH,OAAAA,EAAQP,OAAOC,EAAI,IAClCA,CACR,CAEM,SAASU,IACd,IAAMJ,EAAUlB,EAAAA,QAAMmB,WAAWpB,GACjC,IAAKmB,EACH,MAAM,IAAIE,MACR,iFAEJ,MAAO,CAAEd,KAAMY,EAAQZ,KACxB,CAEc,IAAAiB,EAAA,CACbpB,iBAAAA,EACAa,OAAAA,EACAM,YAAAA"}
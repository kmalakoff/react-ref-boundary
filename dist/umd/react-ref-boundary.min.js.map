{"version":3,"file":"react-ref-boundary.min.js","sources":["../../src/index.tsx"],"sourcesContent":["import React, {\n  useState,\n  useRef as useRefReact,\n  useEffect,\n  createContext,\n  useContext,\n  Ref,\n  RefObject,\n  ReactNode,\n} from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | null>(null);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const [refs] = useState([]);\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(): RefObject<T> {\n  const ref = useRefReact<T>();\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n"],"names":["_arrayLikeToArray","arr","len","RefContext","createContext","param","children","refs","_slicedToArray","useState","React","createElement","Provider","value","addRef","ref","push","splice","indexOf","context","useContext","Error","useRefReact","useEffect"],"mappings":"8WAAA,SAAAA,EAAAC,EAAAC,+7BAgBA,IAAMC,EAAaC,EAAAA,cAAqC,yBAKS,SAE3DC,GADJC,IAAAA,IAAAA,SAEOC,EAAoBC,EAAZC,EAAAA,SAAS,IAAG,GAAA,GAM3B,OACEC,UAAAC,cAACR,EAAWS,SAAQ,CAACC,MAAO,CAAEC,OANhC,SAAgBC,GAEd,OADAR,EAAKS,KAAKD,GACH,kBAAMR,EAAKU,OAAOV,EAAKW,QAAQH,GAAM,KAINR,KAAAA,IACnCD,kBAgBA,WACL,IAAMa,EAAUC,aAAWjB,GAC3B,IAAKgB,EACH,MAAM,IAAIE,MACR,iFAEJ,MAAO,CAAEd,KAAMY,EAAQZ,gBAjBlB,WACL,IAAMQ,EAAMO,EAAAA,SACNH,EAAUC,aAAWjB,GAC3B,IAAKgB,EACH,MAAM,IAAIE,MACR,iFAGJ,OADAE,EAAAA,WAAU,WAAMJ,OAAAA,EAAQL,OAAOC,MACxBA"}
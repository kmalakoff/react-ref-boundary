{"version":3,"sources":["index.tsx"],"sourcesContent":["import { createContext, createElement, useContext, useEffect, useRef as useReactRef, useState } from 'react';\nimport type { FC, ReactNode, Ref, RefObject } from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: FC<BoundaryProviderProps> = ({ children }) => {\n  const state = useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return createElement(\n    RefContext.Provider,\n    {\n      value: {\n        addRef,\n        refs,\n      },\n    },\n    children\n  );\n};\n\nexport function useRef<T>(initialValue: T): RefObject<T> {\n  const ref = useReactRef<T>(initialValue);\n  const context = useContext(RefContext);\n  if (!context) throw new Error('react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary');\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context) throw new Error('Missing react-ref-boundary context. Check for correct use of BoundaryProvider');\n  return { refs: context.refs };\n}\n"],"names":["createContext","createElement","useContext","useEffect","useRef","useReactRef","useState","RefContext","undefined","BoundaryProvider","children","state","refs","addRef","ref","push","splice","indexOf","Provider","value","initialValue","context","Error","useBoundary"],"mappings":"AAAA,SAASA,aAAa,EAAEC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,UAAUC,WAAW,EAAEC,QAAQ,QAAQ,QAAQ;AAQ7G,MAAMC,2BAAaP,cAA0CQ;AAK7D,OAAO,MAAMC,mBAA8C,CAAC,EAAEC,QAAQ,EAAE;IACtE,MAAMC,QAAQL,SAAS,EAAE;IACzB,MAAMM,OAAOD,KAAK,CAAC,EAAE;IAErB,SAASE,OAAOC,GAAG;QACjBF,KAAKG,IAAI,CAACD;QACV,OAAO,IAAMF,KAAKI,MAAM,CAACJ,KAAKK,OAAO,CAACH,MAAM;IAC9C;IAEA,qBAAOb,cACLM,WAAWW,QAAQ,EACnB;QACEC,OAAO;YACLN;YACAD;QACF;IACF,GACAF;AAEJ,EAAE;AAEF,OAAO,SAASN,OAAUgB,YAAe;IACvC,MAAMN,MAAMT,YAAee;IAC3B,MAAMC,UAAUnB,WAAWK;IAC3B,IAAI,CAACc,SAAS,MAAM,IAAIC,MAAM;IAC9BnB,UAAU,IAAMkB,QAAQR,MAAM,CAACC;IAC/B,OAAOA;AACT;AAEA,OAAO,SAASS;IACd,MAAMF,UAAUnB,WAAWK;IAC3B,IAAI,CAACc,SAAS,MAAM,IAAIC,MAAM;IAC9B,OAAO;QAAEV,MAAMS,QAAQT,IAAI;IAAC;AAC9B"}
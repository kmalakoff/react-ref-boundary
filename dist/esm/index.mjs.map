{"version":3,"sources":["index.tsx"],"sourcesContent":["import { createContext, createElement, useContext, useEffect, useRef as useReactRef, useState } from 'react';\nimport type { FC, ReactNode, Ref, RefObject } from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: FC<BoundaryProviderProps> = ({ children }) => {\n  const state = useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return createElement(\n    RefContext.Provider,\n    {\n      value: {\n        addRef,\n        refs,\n      },\n    },\n    children\n  );\n};\n\nexport function useRef<T>(initialValue: T): RefObject<T> {\n  const ref = useReactRef<T>(initialValue);\n  const context = useContext(RefContext);\n  if (!context) throw new Error('react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary');\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context) throw new Error('Missing react-ref-boundary context. Check for correct use of BoundaryProvider');\n  return { refs: context.refs };\n}\n\nexport default {\n  BoundaryProvider,\n  useRef,\n  useBoundary,\n};\n"],"names":["createContext","createElement","useContext","useEffect","useRef","useReactRef","useState","RefContext","undefined","BoundaryProvider","children","state","refs","addRef","ref","push","splice","indexOf","Provider","value","initialValue","context","Error","useBoundary"],"mappings":"AAAA,SAASA,aAAa,EAAEC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,MAAM,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO,CAAC;AAQ7G,MAAMC,UAAU,iBAAGP,aAAa,CAA6BQ,SAAS,CAAC,AAAC;AAKxE,OAAO,MAAMC,gBAAgB,GAA8B,CAAC,EAAEC,QAAQ,CAAA,EAAE,GAAK;IAC3E,MAAMC,KAAK,GAAGL,QAAQ,CAAC,EAAE,CAAC,AAAC;IAC3B,MAAMM,IAAI,GAAGD,KAAK,CAAC,CAAC,CAAC,AAAC;IAEtB,SAASE,MAAM,CAACC,GAAG,EAAE;QACnBF,IAAI,CAACG,IAAI,CAACD,GAAG,CAAC,CAAC;QACf,OAAO,IAAMF,IAAI,CAACI,MAAM,CAACJ,IAAI,CAACK,OAAO,CAACH,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;KAChD;IAED,qBAAOb,aAAa,CAClBM,UAAU,CAACW,QAAQ,EACnB;QACEC,KAAK,EAAE;YACLN,MAAM;YACND,IAAI;SACL;KACF,EACDF,QAAQ,CACT,CAAC;CACH,CAAC;AAEF,OAAO,SAASN,MAAM,CAAIgB,YAAe,EAAgB;IACvD,MAAMN,GAAG,GAAGT,WAAW,CAAIe,YAAY,CAAC,AAAC;IACzC,MAAMC,OAAO,GAAGnB,UAAU,CAACK,UAAU,CAAC,AAAC;IACvC,IAAI,CAACc,OAAO,EAAE,MAAM,IAAIC,KAAK,CAAC,6IAA6I,CAAC,CAAC;IAC7KnB,SAAS,CAAC,IAAMkB,OAAO,CAACR,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC;IACrC,OAAOA,GAAG,CAAC;CACZ;AAED,OAAO,SAASS,WAAW,GAAG;IAC5B,MAAMF,OAAO,GAAGnB,UAAU,CAACK,UAAU,CAAC,AAAC;IACvC,IAAI,CAACc,OAAO,EAAE,MAAM,IAAIC,KAAK,CAAC,+EAA+E,CAAC,CAAC;IAC/G,OAAO;QAAEV,IAAI,EAAES,OAAO,CAACT,IAAI;KAAE,CAAC;CAC/B;AAED,eAAe;IACbH,gBAAgB;IAChBL,MAAM;IACNmB,WAAW;CACZ,CAAC"}
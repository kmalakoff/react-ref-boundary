{"version":3,"sources":["index.tsx"],"sourcesContent":["import React from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: React.Ref<unknown>) => void;\n  refs: React.Ref<unknown>[];\n};\n\nconst RefContext = React.createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: React.ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const state = React.useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(initialValue: T): React.RefObject<T> {\n  const ref = React.useRef<T>(initialValue);\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary',\n    );\n  React.useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = React.useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n"],"names":["React","RefContext","createContext","undefined","BoundaryProvider","children","state","useState","refs","addRef","ref","push","splice","indexOf","Provider","value","useRef","initialValue","context","useContext","Error","useEffect","useBoundary"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO,CAAC;AAO1B,MAAMC,UAAU,iBAAGD,KAAK,CAACE,aAAa,CAA6BC,SAAS,CAAC,AAAC;AAK9E,OAAO,MAAMC,gBAAgB,GAAoC,CAAC,EAChEC,QAAQ,CAAA,IACT,GAAK;IACJ,MAAMC,KAAK,GAAGN,KAAK,CAACO,QAAQ,CAAC,EAAE,CAAC,AAAC;IACjC,MAAMC,IAAI,GAAGF,KAAK,CAAC,CAAC,CAAC,AAAC;IAEtB,SAASG,MAAM,CAACC,GAAG,EAAE;QACnBF,IAAI,CAACG,IAAI,CAACD,GAAG,CAAC,CAAC;QACf,OAAO,IAAMF,IAAI,CAACI,MAAM,CAACJ,IAAI,CAACK,OAAO,CAACH,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;KAChD;IAED,qBACE,oBAACT,UAAU,CAACa,QAAQ;QAACC,KAAK,EAAE;YAAEN,MAAM;YAAED,IAAI;SAAE;OACzCH,QAAQ,CACW,CACtB;CACH,CAAC;AAEF,OAAO,SAASW,MAAM,CAAIC,YAAe,EAAsB;IAC7D,MAAMP,GAAG,GAAGV,KAAK,CAACgB,MAAM,CAAIC,YAAY,CAAC,AAAC;IAC1C,MAAMC,OAAO,GAAGlB,KAAK,CAACmB,UAAU,CAAClB,UAAU,CAAC,AAAC;IAC7C,IAAI,CAACiB,OAAO,EACV,MAAM,IAAIE,KAAK,CACb,6IAA6I,CAC9I,CAAC;IACJpB,KAAK,CAACqB,SAAS,CAAC,IAAMH,OAAO,CAACT,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC;IAC3C,OAAOA,GAAG,CAAC;CACZ;AAED,OAAO,SAASY,WAAW,GAAG;IAC5B,MAAMJ,OAAO,GAAGlB,KAAK,CAACmB,UAAU,CAAClB,UAAU,CAAC,AAAC;IAC7C,IAAI,CAACiB,OAAO,EACV,MAAM,IAAIE,KAAK,CACb,+EAA+E,CAChF,CAAC;IACJ,OAAO;QAAEZ,IAAI,EAAEU,OAAO,CAACV,IAAI;KAAE,CAAC;CAC/B"}
{"version":3,"sources":["index.tsx"],"sourcesContent":["import React, {\n  useState,\n  useRef as useRefReact,\n  useEffect,\n  createContext,\n  useContext,\n  Ref,\n  RefObject,\n  ReactNode,\n} from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | null>(null);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const [refs] = useState([]);\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(): RefObject<T> {\n  const ref = useRefReact<T>();\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n"],"names":["React","useState","useRef","useRefReact","useEffect","createContext","useContext","RefContext","BoundaryProvider","children","refs","addRef","ref","push","splice","indexOf","Provider","value","context","Error","useBoundary"],"mappings":"AAAA,OAAOA,KAAK,IACVC,QAAQ,EACRC,MAAM,IAAIC,WAAW,EACrBC,SAAS,EACTC,aAAa,EACbC,UAAU,QAIL,OAAO,CAAC;AAOf,MAAMC,UAAU,iBAAGF,aAAa,CAAwB,IAAI,CAAC,AAAC;AAK9D,OAAO,MAAMG,gBAAgB,GAAoC,CAAC,EAChEC,QAAQ,CAAA,IACT,GAAK;IACJ,MAAM,CAACC,IAAI,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC,AAAC;IAC5B,SAASU,MAAM,CAACC,GAAG,EAAE;QACnBF,IAAI,CAACG,IAAI,CAACD,GAAG,CAAC,CAAC;QACf,OAAO,IAAMF,IAAI,CAACI,MAAM,CAACJ,IAAI,CAACK,OAAO,CAACH,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;KAChD;IAED,qBACE,oBAACL,UAAU,CAACS,QAAQ;QAACC,KAAK,EAAE;YAAEN,MAAM;YAAED,IAAI;SAAE;OACzCD,QAAQ,CACW,CACtB;CACH,CAAC;AAEF,OAAO,SAASP,MAAM,GAAoB;IACxC,MAAMU,GAAG,GAAGT,WAAW,EAAK,AAAC;IAC7B,MAAMe,OAAO,GAAGZ,UAAU,CAACC,UAAU,CAAC,AAAC;IACvC,IAAI,CAACW,OAAO,EACV,MAAM,IAAIC,KAAK,CACb,+EAA+E,CAChF,CAAC;IACJf,SAAS,CAAC,IAAMc,OAAO,CAACP,MAAM,CAACC,GAAG,CAAC,CAAC,CAAC;IACrC,OAAOA,GAAG,CAAC;CACZ;AAED,OAAO,SAASQ,WAAW,GAAG;IAC5B,MAAMF,OAAO,GAAGZ,UAAU,CAACC,UAAU,CAAC,AAAC;IACvC,IAAI,CAACW,OAAO,EACV,MAAM,IAAIC,KAAK,CACb,+EAA+E,CAChF,CAAC;IACJ,OAAO;QAAET,IAAI,EAAEQ,OAAO,CAACR,IAAI;KAAE,CAAC;CAC/B"}
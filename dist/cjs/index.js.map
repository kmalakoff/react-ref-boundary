{"version":3,"sources":["index.tsx"],"sourcesContent":["import { createContext, createElement, useContext, useEffect, useRef as useReactRef, useState } from 'react';\nimport type { FC, ReactNode, Ref, RefObject } from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: FC<BoundaryProviderProps> = ({ children }) => {\n  const state = useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return createElement(\n    RefContext.Provider,\n    {\n      value: {\n        addRef,\n        refs,\n      },\n    },\n    children\n  );\n};\n\nexport function useRef<T>(initialValue: T): RefObject<T> {\n  const ref = useReactRef<T>(initialValue);\n  const context = useContext(RefContext);\n  if (!context) throw new Error('react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary');\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context) throw new Error('Missing react-ref-boundary context. Check for correct use of BoundaryProvider');\n  return { refs: context.refs };\n}\n\nexport default {\n  BoundaryProvider,\n  useRef,\n  useBoundary,\n};\n"],"names":["BoundaryProvider","useRef","useBoundary","RefContext","createContext","undefined","children","addRef","ref","refs","push","splice","indexOf","state","useState","createElement","Provider","value","initialValue","useReactRef","context","useContext","Error","useEffect"],"mappings":"AAAA;;;;;;;;;;;IAaaA,gBAAgB;eAAhBA,gBAAgB;;IAqBbC,MAAM;eAANA,MAAM;;IAQNC,WAAW;eAAXA,WAAW;;IAM3B,OAIE;eAJF,QAIE;;;qBApDmG,OAAO;AAQ5G,IAAMC,UAAU,iBAAGC,IAAAA,MAAa,cAAA,EAA6BC,SAAS,CAAC,AAAC;AAKjE,IAAML,gBAAgB,GAA8B,gBAAkB;QAAfM,QAAQ,SAARA,QAAQ;QAI3DC,MAAM,GAAf,SAASA,MAAM,CAACC,GAAG,EAAE;QACnBC,IAAI,CAACC,IAAI,CAACF,GAAG,CAAC,CAAC;QACf,OAAO;mBAAMC,IAAI,CAACE,MAAM,CAACF,IAAI,CAACG,OAAO,CAACJ,GAAG,CAAC,EAAE,CAAC,CAAC;SAAA,CAAC;KAChD;IAND,IAAMK,KAAK,GAAGC,IAAAA,MAAQ,SAAA,EAAC,EAAE,CAAC,AAAC;IAC3B,IAAML,IAAI,GAAGI,KAAK,CAAC,CAAC,CAAC,AAAC;IAOtB,qBAAOE,IAAAA,MAAa,cAAA,EAClBZ,UAAU,CAACa,QAAQ,EACnB;QACEC,KAAK,EAAE;YACLV,MAAM,EAANA,MAAM;YACNE,IAAI,EAAJA,IAAI;SACL;KACF,EACDH,QAAQ,CACT,CAAC;CACH,AAAC;AAEK,SAASL,MAAM,CAAIiB,YAAe,EAAgB;IACvD,IAAMV,GAAG,GAAGW,IAAAA,MAAW,OAAA,EAAID,YAAY,CAAC,AAAC;IACzC,IAAME,OAAO,GAAGC,IAAAA,MAAU,WAAA,EAAClB,UAAU,CAAC,AAAC;IACvC,IAAI,CAACiB,OAAO,EAAE,MAAM,IAAIE,KAAK,CAAC,6IAA6I,CAAC,CAAC;IAC7KC,IAAAA,MAAS,UAAA,EAAC;eAAMH,OAAO,CAACb,MAAM,CAACC,GAAG,CAAC;KAAA,CAAC,CAAC;IACrC,OAAOA,GAAG,CAAC;CACZ;AAEM,SAASN,WAAW,GAAG;IAC5B,IAAMkB,OAAO,GAAGC,IAAAA,MAAU,WAAA,EAAClB,UAAU,CAAC,AAAC;IACvC,IAAI,CAACiB,OAAO,EAAE,MAAM,IAAIE,KAAK,CAAC,+EAA+E,CAAC,CAAC;IAC/G,OAAO;QAAEb,IAAI,EAAEW,OAAO,CAACX,IAAI;KAAE,CAAC;CAC/B;IAED,QAIE,GAJa;IACbT,gBAAgB,EAAhBA,gBAAgB;IAChBC,MAAM,EAANA,MAAM;IACNC,WAAW,EAAXA,WAAW;CACZ"}
{"version":3,"sources":["index.tsx"],"sourcesContent":["import React, {\n  useState,\n  useRef as useRefReact,\n  useEffect,\n  createContext,\n  useContext,\n  Ref,\n  RefObject,\n  ReactNode,\n} from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | null>(null);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: React.FC<BoundaryProviderProps> = ({\n  children,\n}) => {\n  const [refs] = useState([]);\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return (\n    <RefContext.Provider value={{ addRef, refs }}>\n      {children}\n    </RefContext.Provider>\n  );\n};\n\nexport function useRef<T>(): RefObject<T> {\n  const ref = useRefReact<T>();\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context)\n    throw new Error(\n      'Missing react-ref-boundary context. Check for correct use of BoundaryProvider',\n    );\n  return { refs: context.refs };\n}\n"],"names":["useRef","useBoundary","RefContext","createContext","BoundaryProvider","children","addRef","ref","refs","push","splice","indexOf","useState","Provider","value","useRefReact","context","useContext","Error","useEffect"],"mappings":"AAAA;;;;QAqCgBA,MAAM,GAANA,MAAM;QAWNC,WAAW,GAAXA,WAAW;;AAvCpB,IAAA,MAAO,mCAAP,OAAO,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOd,IAAMC,UAAU,iBAAGC,CAAAA,GAAAA,MAAa,AAA6B,CAAA,cAA7B,CAAwB,IAAI,CAAC,AAAC;AAKvD,IAAMC,gBAAgB,GAAoC,gBAE3D;QADJC,QAAQ,SAARA,QAAQ;QAGCC,MAAM,GAAf,SAASA,MAAM,CAACC,GAAG,EAAE;QACnBC,IAAI,CAACC,IAAI,CAACF,GAAG,CAAC,CAAC;QACf,OAAO;mBAAMC,IAAI,CAACE,MAAM,CAACF,IAAI,CAACG,OAAO,CAACJ,GAAG,CAAC,EAAE,CAAC,CAAC;SAAA,CAAC;KAChD;IAJD,IAAeK,GAAY,kBAAZA,CAAAA,GAAAA,MAAQ,AAAI,CAAA,SAAJ,CAAC,EAAE,CAAC,IAAA,EAApBJ,IAAI,GAAII,GAAY,GAAhB,AAAiB;IAM5B,qBACE,6BAACV,UAAU,CAACW,QAAQ;QAACC,KAAK,EAAE;YAAER,MAAM,EAANA,MAAM;YAAEE,IAAI,EAAJA,IAAI;SAAE;OACzCH,QAAQ,CACW,CACtB;CACH,AAAC;QAdWD,gBAAgB,GAAhBA,gBAAgB;AAgBtB,SAASJ,MAAM,GAAoB;IACxC,IAAMO,GAAG,GAAGQ,CAAAA,GAAAA,MAAW,AAAK,CAAA,OAAL,EAAK,AAAC;IAC7B,IAAMC,OAAO,GAAGC,CAAAA,GAAAA,MAAU,AAAY,CAAA,WAAZ,CAACf,UAAU,CAAC,AAAC;IACvC,IAAI,CAACc,OAAO,EACV,MAAM,IAAIE,KAAK,CACb,+EAA+E,CAChF,CAAC;IACJC,CAAAA,GAAAA,MAAS,AAA2B,CAAA,UAA3B,CAAC;eAAMH,OAAO,CAACV,MAAM,CAACC,GAAG,CAAC;KAAA,CAAC,CAAC;IACrC,OAAOA,GAAG,CAAC;CACZ;AAEM,SAASN,WAAW,GAAG;IAC5B,IAAMe,OAAO,GAAGC,CAAAA,GAAAA,MAAU,AAAY,CAAA,WAAZ,CAACf,UAAU,CAAC,AAAC;IACvC,IAAI,CAACc,OAAO,EACV,MAAM,IAAIE,KAAK,CACb,+EAA+E,CAChF,CAAC;IACJ,OAAO;QAAEV,IAAI,EAAEQ,OAAO,CAACR,IAAI;KAAE,CAAC;CAC/B"}
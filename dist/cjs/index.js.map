{"version":3,"sources":["index.tsx"],"sourcesContent":["import { createContext, createElement, useContext, useEffect, useRef as useReactRef, useState } from 'react';\nimport type { FC, ReactNode, Ref, RefObject } from 'react';\n\nexport type RefContextType = {\n  addRef: (ref: Ref<unknown>) => void;\n  refs: Ref<unknown>[];\n};\n\nconst RefContext = createContext<RefContextType | undefined>(undefined);\n\nexport interface BoundaryProviderProps {\n  children?: ReactNode;\n}\nexport const BoundaryProvider: FC<BoundaryProviderProps> = ({ children }) => {\n  const state = useState([]);\n  const refs = state[0];\n\n  function addRef(ref) {\n    refs.push(ref);\n    return () => refs.splice(refs.indexOf(ref), 1);\n  }\n\n  return createElement(\n    RefContext.Provider,\n    {\n      value: {\n        addRef,\n        refs,\n      },\n    },\n    children\n  );\n};\n\nexport function useRef<T>(initialValue: T): RefObject<T> {\n  const ref = useReactRef<T>(initialValue);\n  const context = useContext(RefContext);\n  if (!context) throw new Error('react-ref-boundary: addRef not found on context. You might be missing the BoundaryProvider or have multiple instances of react-ref-boundary');\n  useEffect(() => context.addRef(ref));\n  return ref;\n}\n\nexport function useBoundary() {\n  const context = useContext(RefContext);\n  if (!context) throw new Error('Missing react-ref-boundary context. Check for correct use of BoundaryProvider');\n  return { refs: context.refs };\n}\n"],"names":["BoundaryProvider","useBoundary","useRef","RefContext","createContext","undefined","children","addRef","ref","refs","push","splice","indexOf","state","useState","createElement","Provider","value","initialValue","useReactRef","context","useContext","Error","useEffect"],"mappings":";;;;;;;;;;;IAaaA,gBAAgB;eAAhBA;;IA6BGC,WAAW;eAAXA;;IARAC,MAAM;eAANA;;;qBAlCqF;AAQrG,IAAMC,2BAAaC,IAAAA,oBAAa,EAA6BC;AAKtD,IAAML,mBAA8C;QAAGM,iBAAAA;QAInDC,SAAT,SAASA,OAAOC,GAAG;QACjBC,KAAKC,IAAI,CAACF;QACV,OAAO;mBAAMC,KAAKE,MAAM,CAACF,KAAKG,OAAO,CAACJ,MAAM;;IAC9C;IANA,IAAMK,QAAQC,IAAAA,eAAQ,EAAC,EAAE;IACzB,IAAML,OAAOI,KAAK,CAAC,EAAE;IAOrB,qBAAOE,IAAAA,oBAAa,EAClBZ,WAAWa,QAAQ,EACnB;QACEC,OAAO;YACLV,QAAAA;YACAE,MAAAA;QACF;IACF,GACAH;AAEJ;AAEO,SAASJ,OAAUgB,YAAe;IACvC,IAAMV,MAAMW,IAAAA,aAAW,EAAID;IAC3B,IAAME,UAAUC,IAAAA,iBAAU,EAAClB;IAC3B,IAAI,CAACiB,SAAS,MAAM,IAAIE,MAAM;IAC9BC,IAAAA,gBAAS,EAAC;eAAMH,QAAQb,MAAM,CAACC;;IAC/B,OAAOA;AACT;AAEO,SAASP;IACd,IAAMmB,UAAUC,IAAAA,iBAAU,EAAClB;IAC3B,IAAI,CAACiB,SAAS,MAAM,IAAIE,MAAM;IAC9B,OAAO;QAAEb,MAAMW,QAAQX,IAAI;IAAC;AAC9B"}